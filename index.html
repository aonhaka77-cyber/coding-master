<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì½”ë”© ë§ˆìŠ¤í„° - ì»¤ë®¤ë‹ˆí‹°</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        :root { --primary-color: #4a6cf7; --bg-color: #f8f9fa; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); margin: 0; padding: 0; }
        
        /* í—¤ë” & ë„¤ë¹„ê²Œì´ì…˜ */
        header { background: white; padding: 15px 10%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; }
        .logo { font-weight: bold; color: var(--primary-color); font-size: 24px; text-decoration: none; }
        nav a { margin: 0 15px; text-decoration: none; color: #666; font-size: 14px; position: relative; padding-bottom: 5px; }
        /* ë©”ë‰´ ë°‘ì¤„ ë²„ê·¸ í•´ê²°: active í´ë˜ìŠ¤ì¼ ë•Œë§Œ í‘œì‹œ */
        nav a.active { color: var(--primary-color); border-bottom: 2px solid var(--primary-color); }

        /* ë©”ì¸ ì»¨í…ì¸  ë ˆì´ì•„ì›ƒ */
        .container { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; padding: 20px 10%; }
        .card { background: white; border-radius: 12px; padding: 20px; border: 1px solid #eef0f2; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .welcome-banner { background: #333; color: white; margin-bottom: 20px; }

        /* ê²Œì‹œê¸€ ëª©ë¡ ìŠ¤íƒ€ì¼ */
        .post-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f1f1; }
        .post-item:last-child { border-bottom: none; }
        #loading { text-align: center; color: #999; padding: 20px; }

        /* ê¸€ì“°ê¸° ë²„íŠ¼ */
        .write-btn { background: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; float: right; }
    </style>
</head>
<body>

<header>
    <a href="#" class="logo">ğŸš€ CODING MASTER</a>
    <nav id="mainNav">
        <a href="#" class="active" onclick="changeMenu(this)">í™ˆ</a>
        <a href="#" onclick="changeMenu(this)">ê³µì§€ì‚¬í•­</a>
        <a href="#" onclick="changeMenu(this)">ììœ ê²Œì‹œíŒ</a>
        <a href="#" onclick="changeMenu(this)">ê°¤ëŸ¬ë¦¬</a>
        <a href="#" onclick="changeMenu(this)">ğŸ‘‘ ê´€ë¦¬ì½˜ì†”</a>
    </nav>
    <div><button class="write-btn" onclick="writePost()">ê¸€ì“°ê¸°</button></div>
</header>

<div class="container">
    <main>
        <div class="card welcome-banner">
            <h2>ì½”ë”© ë§ˆìŠ¤í„°ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤</h2>
            <p>ì§€ê¸ˆ ë°”ë¡œ ììœ ê²Œì‹œíŒì— ì²« ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</p>
        </div>

        <div class="card">
            <h3>ğŸ†• ìµœê·¼ ì˜¬ë¼ì˜¨ ê¸€</h3>
            <div id="loading">ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì¤‘...</div>
            <div id="postList"></div>
        </div>
    </main>

    <aside>
        <div class="card" style="margin-bottom: 20px;">
            <h4>ğŸ“Š ì»¤ë®¤ë‹ˆí‹° í†µê³„</h4>
            <p>ì „ì²´ ê²Œì‹œê¸€: <span id="totalPosts">0</span></p>
        </div>
        <div class="card">
            <h4>â­ ìš´ì˜ì§„ í”½</h4>
            <p>ì•ˆë…•í•˜ì„¸ìš”!</p>
        </div>
    </aside>
</div>

<script>
    // 1. Firebase ì„¤ì • (ë³¸ì¸ì˜ ê²ƒìœ¼ë¡œ êµì²´ í•„ìˆ˜!)
    const firebaseConfig = {
        apiKey: "AIzaSyBcxvsiEOyL1lZGVr1UE2gzzZ7HQX5YfbI",
        authDomain: "code-78890.firebaseapp.com",
        projectId: "code-78890",
        storageBucket: "code-78890.firebasestorage.app",
        messagingSenderId: "30317586652",
        appId: "1:30317586652:web:d1e6fa39c319029fb7ac19"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 2. ë©”ë‰´ ì „í™˜ ê¸°ëŠ¥ (ì¤‘ë³µ ë°‘ì¤„ í•´ê²°)
    function changeMenu(element) {
        document.querySelectorAll('#mainNav a').forEach(a => a.classList.remove('active'));
        element.classList.add('active');
    }

    // 3. ê¸€ ë¶ˆëŸ¬ì˜¤ê¸° (posts ì»¬ë ‰ì…˜ ì‚¬ìš©)
    function loadPosts() {
        db.collection("posts").orderBy("createdAt", "desc").onSnapshot((snapshot) => {
            const postList = document.getElementById("postList");
            const loading = document.getElementById("loading");
            const totalPosts = document.getElementById("totalPosts");
            
            loading.style.display = "none";
            postList.innerHTML = "";
            totalPosts.innerText = snapshot.size;

            snapshot.forEach((doc) => {
                const post = doc.data();
                postList.innerHTML += `
                    <div class="post-item">
                        <span>${post.content || post.title || 'ë‚´ìš© ì—†ìŒ'}</span>
                        <span style="color: #999; font-size: 12px;">1.</span>
                    </div>
                `;
            });
        });
    }

    // 4. ê¸€ì“°ê¸° ê¸°ëŠ¥ (ì‹¤ì œ DB ì €ì¥)
    function writePost() {
        const content = prompt("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:");
        if (content) {
            db.collection("posts").add({
                content: content,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert("ê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
            }).catch((error) => {
                alert("ì—ëŸ¬ ë°œìƒ: " + error.message);
            });
        }
    }

    // ì´ˆê¸° ì‹¤í–‰
    loadPosts();
</script>
</body>
</html>
